{
  "action": "update_code",
  "file_path": "ben_gui_desktop/main_gui.py",
  "update_type": "custom_insert",
  "insert_at_line": 20,
  "code": "status_label = ttk.Label(root, text=\"🟡 Перевірка статусу агента...\")\nstatus_label.pack(pady=5)\n\ndef check_agent_status():\n    command = {\"action\": \"check_status\"}\n    with open(request_file, \"w\", encoding=\"utf-8\") as f:\n        json.dump([command], f, indent=2)\n    def update_status():\n        if os.path.exists(response_file):\n            with open(response_file, \"r\", encoding=\"utf-8\") as f:\n                try:\n                    response = json.load(f)[0]\n                    msg = response.get(\"message\", \"❌ No response\")\n                    if \"🟢\" in msg:\n                        status_label.config(text=msg)\n                    else:\n                        status_label.config(text=f\"🔴 {msg}\")\n                except:\n                    status_label.config(text=\"❌ Error reading agent status\")\n    root.after(1500, update_status)\n\ncheck_agent_status()"
}
