{
  "action": "macro",
  "context_guide": "–ú–∏ —Ö–æ—á–µ–º–æ, —â–æ–± GPT –º—ñ–≥ –∫—Ä–∞—â–µ —Ä–æ–∑—É–º—ñ—Ç–∏ —Å—É—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏—Ö –¥—ñ–π —É —Å–∏—Å—Ç–µ–º—ñ Ben. –î–ª—è —Ü—å–æ–≥–æ –º–∏ –¥–æ–¥–∞—î–º–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –ø–æ–ª—è 'context_guide', —è–∫–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —Ç–∞ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ auto_feedback. –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å GPT –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É —Ä–æ–±–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–∫–∏ –ø—Ä–æ –¥–æ—Ü—ñ–ª—å–Ω—ñ—Å—Ç—å –¥—ñ–π, –Ω–∞–≤—á–∞—Ç–∏—Å—è –Ω–∞ —Ñ—ñ–¥–±–µ–∫–∞—Ö —Ç–∞ –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ñ—Å—Ç—å –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é. –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–π –∫—Ä–æ–∫ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Sora-–ø–æ–¥—ñ–±–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∑ —Ä–µ–∞–ª—å–Ω–∏–º —Å–∞–º–æ–Ω–∞–≤—á–∞–Ω–Ω—è–º.",
  "steps": [
    {
      "action": "run_python",
      "parameters": {
        "code": "import sqlite3\nconn = sqlite3.connect('history.sqlite')\ncursor = conn.cursor()\ncursor.execute(\"ALTER TABLE command_history ADD COLUMN context_guide TEXT\")\nconn.commit()\nconn.close()"
      },
      "comment": "‚ûï –î–æ–¥–∞—î –∫–æ–ª–æ–Ω–∫—É context_guide —É —Ç–∞–±–ª–∏—Ü—é command_history"
    },
    {
      "action": "update_code",
      "file_path": "gpt_agent_cache.py",
      "updates": [
        {
          "pattern": "INSERT INTO command_history \\(action, file_path, update_type\\)[\\s\\S]*?\\)",
          "replacement": "INSERT INTO command_history (action, file_path, update_type, context_guide) VALUES (?, ?, ?, ?)"
        },
        {
          "pattern": "cursor.execute\\(.*?\\)",
          "replacement": "cursor.execute(\"INSERT INTO command_history (action, file_path, update_type, context_guide) VALUES (?, ?, ?, ?)\", (\n    cmd.get(\"action\"),\n    cmd.get(\"file_path\") or cmd.get(\"filename\"),\n    cmd.get(\"update_type\"),\n    cmd.get(\"context_guide\", \"\")\n))"
        }
      ],
      "comment": "üß† –ó–±–µ—Ä—ñ–≥–∞—î context_guide –≤ –±–∞–∑—É –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –¥—ñ—ó"
    },
    {
      "action": "update_code",
      "file_path": "gpt_agent_cache.py",
      "updates": [
        {
          "pattern": "# üîÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ auto_feedback –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –¥—ñ—ó",
          "replacement": "# üîÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ auto_feedback –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –¥—ñ—ó\nif cmd.get('context_guide'): log_action('üß† –¶—ñ–ª—å –¥—ñ—ó: ' + cmd['context_guide'])"
        }
      ],
      "comment": "üß† –õ–æ–≥—É–≤–∞–Ω–Ω—è context_guide —É –ª–æ–≥–∞—Ö –¥—ñ–π"
    }
  ]
}
