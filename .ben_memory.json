[
  {
    "action": "create_file",
    "filename": "test_memory.txt",
    "content": "Memory test",
    "timestamp": "2025-03-26 23:04:26"
  },
  {
    "action": "append_file",
    "filename": "gpt_agent_cache.py",
    "content": "\n\ndef repeat_last_action():\n    memory_file = os.path.join(base_path, \".ben_memory.json\")\n    if not os.path.exists(memory_file):\n        return {\"status\": \"error\", \"message\": \"‚ùå Memory file not found\"}\n    try:\n        with open(memory_file, \"r\", encoding=\"utf-8\") as f:\n            memory = json.load(f)\n        if not memory:\n            return {\"status\": \"error\", \"message\": \"‚ùå No memory to repeat\"}\n        last_cmd = memory[-1]\n        return handle_command(last_cmd)\n    except Exception as e:\n        return {\"status\": \"error\", \"message\": f\"‚ùå Repeat error: {str(e)}\"}\n",
    "timestamp": "2025-03-26 23:21:10"
  },
  {
    "action": "append_file",
    "filename": "gpt_agent_cache.py",
    "content": "\n\ndef log_diff(filepath):\n    try:\n        result = subprocess.run([\"git\", \"diff\", filepath], capture_output=True, text=True)\n        diff = result.stdout.strip()\n        if diff:\n            timestamp = datetime.now(timezone.utc).strftime(\"%Y-%m-%d %H:%M:%S\")\n            with open(history_file, \"a\", encoding=\"utf-8\") as f:\n                f.write(f\"[DIFF {timestamp}] File: {filepath}\\n{diff}\\n---\\n\")\n    except Exception as e:\n        with open(history_file, \"a\", encoding=\"utf-8\") as f:\n            f.write(f\"[DIFF ERROR] {filepath}: {str(e)}\\n\")\n",
    "timestamp": "2025-03-27 08:29:43"
  },
  {
    "action": "append_file",
    "filename": "gpt_agent_cache.py",
    "content": "\n\ndef log_diff(filepath):\n    try:\n        result = subprocess.run([\"git\", \"diff\", filepath], capture_output=True, text=True)\n        diff = result.stdout.strip()\n        if diff:\n            timestamp = datetime.now(timezone.utc).strftime(\"%Y-%m-%d %H:%M:%S\")\n            with open(history_file, \"a\", encoding=\"utf-8\") as f:\n                f.write(f\"[DIFF {timestamp}] File: {filepath}\\n{diff}\\n---\\n\")\n    except Exception as e:\n        with open(history_file, \"a\", encoding=\"utf-8\") as f:\n            f.write(f\"[DIFF ERROR] {filepath}: {str(e)}\\n\")\n",
    "timestamp": "2025-03-27 08:48:59"
  },
  {
    "action": "create_file",
    "filename": "test_self.txt",
    "content": "Hello test!",
    "timestamp": "2025-03-27 09:27:45"
  },
  {
    "action": "delete_file",
    "filename": "test_self.txt",
    "timestamp": "2025-03-27 09:27:45"
  },
  {
    "action": "create_file",
    "filename": "test_cli.txt",
    "content": "–ü—Ä–∏–≤—ñ—Ç —ñ–∑ CLI!",
    "timestamp": "2025-03-27 10:06:10"
  },
  {
    "action": "git_push",
    "message": "‚úÖ Auto-commit: check_status ",
    "timestamp": "2025-03-27 10:11:03"
  },
  {
    "action": "create_file",
    "filename": "ben_gui_desktop/ben_gui.py",
    "content": "import tkinter as tk\nfrom tkinter import messagebox, scrolledtext\nimport json\nimport os\n\nCACHE_FILE = \"cache.txt\"\n\nclass BenGUI:\n    def __init__(self, root):\n        self.root = root\n        self.root.title(\"Ben Assistant GUI\")\n\n        self.input_label = tk.Label(root, text=\"–í–≤–µ–¥—ñ—Ç—å JSON-–∫–æ–º–∞–Ω–¥—É\")\n        self.input_label.pack()\n\n        self.input_box = scrolledtext.ScrolledText(root, height=10, width=80)\n        self.input_box.pack()\n\n        self.send_button = tk.Button(root, text=\"‚ñ∂Ô∏è –ù–∞–¥—ñ—Å–ª–∞—Ç–∏\", command=self.send_command)\n        self.send_button.pack(pady=4)\n\n        self.undo_button = tk.Button(root, text=\"‚Ü©Ô∏è Undo\", command=lambda: self.send_simple(\"undo_change\"))\n        self.undo_button.pack(pady=2)\n\n        self.repeat_button = tk.Button(root, text=\"üîÅ Repeat\", command=lambda: self.send_simple(\"repeat_last\"))\n        self.repeat_button.pack(pady=2)\n\n        self.output_label = tk.Label(root, text=\"–û—Å—Ç–∞–Ω–Ω—ñ –∫–æ–º–∞–Ω–¥–∏\")\n        self.output_label.pack(pady=4)\n\n        self.history_box = scrolledtext.ScrolledText(root, height=10, width=80, state=\"disabled\")\n        self.history_box.pack()\n\n    def send_simple(self, action):\n        command = {\"action\": action}\n        self.write_cache([command])\n        self.append_history(json.dumps(command, ensure_ascii=False))\n\n    def send_command(self):\n        try:\n            text = self.input_box.get(\"1.0\", tk.END).strip()\n            if not text:\n                messagebox.showwarning(\"–£–≤–∞–≥–∞\", \"–ü–æ–ª–µ –≤–≤–µ–¥–µ–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—î\")\n                return\n            command = json.loads(text)\n            if not isinstance(command, list):\n                command = [command]\n            self.write_cache(command)\n            self.append_history(text)\n            self.input_box.delete(\"1.0\", tk.END)\n        except Exception as e:\n            messagebox.showerror(\"–ü–æ–º–∏–ª–∫–∞\", f\"‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π JSON: {str(e)}\")\n\n    def write_cache(self, data):\n        with open(CACHE_FILE, \"w\", encoding=\"utf-8\") as f:\n            json.dump(data, f, indent=2, ensure_ascii=False)\n\n    def append_history(self, text):\n        self.history_box.configure(state=\"normal\")\n        self.history_box.insert(tk.END, text + \"\\n\\n\")\n        self.history_box.configure(state=\"disabled\")\n\nif __name__ == \"__main__\":\n    if not os.path.exists(\"ben_gui_desktop\"):\n        os.makedirs(\"ben_gui_desktop\")\n\n    root = tk.Tk()\n    gui = BenGUI(root)\n    root.mainloop()",
    "timestamp": "2025-03-27 10:56:06"
  },
  {
    "action": "git_push",
    "message": "‚úÖ Auto-commit: create_file ben_gui_desktop/ben_gui.py",
    "timestamp": "2025-03-27 10:56:14"
  },
  {
    "action": "append_file",
    "filename": "ben_gui_desktop/ben_gui.py",
    "content": "\n        self.list_button = tk.Button(root, text=\"üìÑ List Files\", command=lambda: self.send_simple(\"list_files\"))\n        self.list_button.pack(pady=2)",
    "timestamp": "2025-03-27 10:59:00"
  }
]